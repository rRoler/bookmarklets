javascript:(() => {function t(t,a,e=0){const n=t.match(a);if(n&&n[e])return n[e]}function a(t){const a=localStorage.getItem(t);if(a)return JSON.parse(a)}const e=t(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||t(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1),n=/draft=true/.test(window.location.search);function o(){const t=a("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable")||a("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary");return new Promise(((a,o)=>fetch(`https://api.mangadex.org/manga${n?"/draft/":"/"}${e}`,{headers:{Authorization:n?`${t.token_type} ${t.access_token}`:""}}).then((t=>a(t.json()))).catch((t=>{alert("Failed to fetch title info!"),o(t)}))))}((t,a={})=>{(function(t,a){if(!new RegExp(t).test(window.location.hostname))return alert("Bookmarklet executed on a wrong website!");a()})("^mangadex.org|canary.mangadex.dev",(()=>{const n=a.createPage&&/\/create\//.test(window.location.pathname);return!a.titlePage||e||n?!a.editPage||/\/edit\//.test(window.location.pathname)||n?void t():alert("This is not an edit page!"):alert("This is not a title page!")}))})((()=>{o().then((t=>{const a={al:"https://anilist.co/manga/",ap:"https://www.anime-planet.com/manga/",kt:"https://kitsu.io/manga/",mu:/[A-Za-z]/.test(t.data.attributes.links.mu)?"https://www.mangaupdates.com/series/":"https://www.mangaupdates.com/series.html?id=",mal:"https://myanimelist.net/manga/",nu:"https://www.novelupdates.com/series/",bw:"https://bookwalker.jp/",amz:"",ebj:"",cdj:""};for(const e in t.data.attributes.links){const n=(a[e]||"")+t.data.attributes.links[e];window.open(n,"_blank","noopener,noreferrer")}}))}),{titlePage:!0});})();
