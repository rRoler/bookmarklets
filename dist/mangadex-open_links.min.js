javascript:(() => {function t(t,e,a=0){const n=t.match(e);if(n&&n[a])return n[a]}function e(t){const e=localStorage.getItem(t);if(e)return JSON.parse(e)}const a=t(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||t(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1),n=/draft=true/.test(window.location.search);function o(){const t=e("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable")||e("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary");return new Promise(((e,o)=>fetch(`https://api.mangadex.org/manga${n?"/draft/":"/"}${a}`,{headers:{Authorization:n?`${t.token_type} ${t.access_token}`:""}}).then((t=>e(t.json()))).catch((t=>{alert("Failed to fetch title info!"),o(t)}))))}((t,e={})=>{(function(t,e){if(!new RegExp(t).test(window.location.hostname))return alert("Bookmarklet executed on the wrong website!");e()})("^mangadex.org|canary.mangadex.dev",(()=>{const n=e.createPage&&/\/create\//.test(window.location.pathname),o="You can execute this bookmarklet only on ";return!e.titlePage||a||n?!e.editPage||/\/edit\//.test(window.location.pathname)||n?void t():alert(o+"an edit page!"):alert(o+"a title page!")}))})((()=>{o().then((t=>{const e={al:"https://anilist.co/manga/",ap:"https://www.anime-planet.com/manga/",kt:"https://kitsu.io/manga/",mu:/[A-Za-z]/.test(t.data.attributes.links.mu)?"https://www.mangaupdates.com/series/":"https://www.mangaupdates.com/series.html?id=",mal:"https://myanimelist.net/manga/",nu:"https://www.novelupdates.com/series/",bw:"https://bookwalker.jp/",amz:"",ebj:"",cdj:""};for(const a in t.data.attributes.links){const n=(e[a]||"")+t.data.attributes.links[a];window.open(n,"_blank","noopener,noreferrer")}}))}),{titlePage:!0});})();
