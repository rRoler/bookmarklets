javascript:(function(){function%20t(t,e,r=0){const%20o=t.match(e);if(o%26%26o[r])return%20o[r]}function%20e(t,e=100){const%20r=[...t],o=[];for(;r.length;)o.push(r.splice(0,e));return%20o}function%20r(t){const%20e=localStorage.getItem(t);if(e)return%20JSON.parse(e)}const%20o=t(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||t(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1);function%20s(t,e,r){return(e=function(t){var%20e=function(t,e){if(%22object%22!=typeof%20t||null===t)return%20t;var%20r=t[Symbol.toPrimitive];if(void%200!==r){var%20o=r.call(t,e||%22default%22);if(%22object%22!=typeof%20o)return%20o;throw%20new%20TypeError(%22%40%40toPrimitive%20must%20return%20a%20primitive%20value.%22)}return(%22string%22===e%3FString:Number)(t)}(t,%22string%22);return%22symbol%22==typeof%20e%3Fe:String(e)}(e))in%20t%3FObject.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable%22)||r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary%22);class%20n{constructor(t=0){s(this,%22addToDocument%22,(()=%3Edocument.body.appendChild(this.element))),s(this,%22removeFromDocument%22,(()=%3Ethis.element.remove()));const%20e=document.createElement(%22div%22);e.style.setProperty(%22z-index%22,%221000%22),e.style.setProperty(%22position%22,%22fixed%22),e.style.setProperty(%22bottom%22,%220%22),e.style.setProperty(%22left%22,%220%22),e.style.setProperty(%22width%22,%22100%25%22),e.style.setProperty(%22height%22,%2224px%22),e.style.setProperty(%22background-color%22,%22%233c3c3c%22),e.style.setProperty(%22cursor%22,%22pointer%22);const%20r=document.createElement(%22div%22);r.style.setProperty(%22height%22,%22100%25%22),r.style.setProperty(%22background-color%22,%22%23b5e853%22),r.style.setProperty(%22transition%22,%22width%20200ms%22),this.bar=r,this.update(t),e.appendChild(r),e.addEventListener(%22click%22,this.removeFromDocument),this.element=e}update(t){const%20e=Math.ceil(parseInt(this.bar.style.getPropertyValue(%22width%22))),r=Math.ceil(t);r%3E=100%3Fthis.removeFromDocument():e!==r%26%26r%3E=0%26%26this.bar.style.setProperty(%22width%22,`${r}%25`)}}((t,e={})=%3E{(function(t,e){if(!new%20RegExp(t).test(window.location.hostname))return%20alert(%22Bookmarklet%20executed%20on%20a%20wrong%20website!%22);e()})(%22mangadex.org|canary.mangadex.dev%22,(()=%3Ee.titlePage%26%26!o%3Falert(%22This%20is%20not%20a%20title%20page!%22):e.editPage%26%26!/\/edit\//.test(window.location.pathname)%3Falert(%22This%20is%20not%20an%20edit%20page!%22):void%20t()))})((()=%3E{const%20r=[],o=new%20Map,s=new%20Map,a={manga:[],cover:[]},i=new%20n;if(document.querySelectorAll(%22img,%20div%22).forEach((e=%3E{const%20n=e.src||e.style.getPropertyValue(%22background-image%22);if(!/\/covers\/+[-0-9a-f]{20,}\/+[-0-9a-f]{20,}[^/]+(%3F:[%3F%23].*)%3F$/.test(n))return;const%20a=t(n,/[-0-9a-f]{20,}/),i=t(n,/([-0-9a-f]{20,}\.[^/.]*)\.[0-9]+\.[^/.%3F%23]*([%3F%23].*)%3F$/,1)||t(n,/[-0-9a-f]{20,}\.[^/.]*%3F$/);if(!a||!i)return;const%20l=t=%3E{var%20e;t.has(a)%3Fnull===(e=t.get(a))||void%200===e||e.add(i):t.set(a,new%20Set([i]))};%22executed%22!==e.getAttribute(%22cover-data-bookmarklet%22)%3F(r.push(e),e.setAttribute(%22cover-data-bookmarklet%22,%22executed%22),l(o)):l(s)})),o.size%3C=0)return%20document.querySelector('[cover-data-bookmarklet=%22executed%22]')%3Falert(%22No%20new%20covers%20were%20found%20on%20this%20page%20since%20the%20last%20time%20this%20bookmarklet%20was%20executed!%22):alert(%22No%20covers%20were%20found%20on%20this%20page!%22);function%20l(t,e,r=0){return%20new%20Promise(((o,s)=%3E{const%20n=%22cover%22===e,a=t.map((t=%3En%3F`manga[]=${t}`:`ids[]=${t}`)).join(%22%26%22);let%20i=`https://api.mangadex.org/${e}%3F${a}%26includes[]=cover_art%26limit=100%26contentRating[]=safe%26contentRating[]=suggestive%26contentRating[]=erotica%26contentRating[]=pornographic%26offset=${r}`;if(n%26%26(i=`https://api.mangadex.org/${e}%3Forder[volume]=asc%26${a}%26limit=100%26offset=${r}`),r%3E1e3)return%20s(new%20Error(`Offset%20is%20bigger%20than%201000:\n%20${i}`));fetch(i).then((t=%3Eo(t.json()))).catch(s)}))}i.addToDocument(),o.forEach(((t,e)=%3E{var%20r;const%20o=(null===(r=s.get(e))||void%200===r%3Fvoid%200:r.size)||0;t.size+o%3E1%3Fa.cover.push(e):a.manga.push(e)})),function(){const%20t=[];return%20new%20Promise(((r,o)=%3E{(async%20function(){for(const%20r%20in%20a){const%20o=%22cover%22===r,s=e(a[r]);for(const%20e%20of%20s){const%20s=await%20l(e,r);if(o){t.push(...s.data);for(let%20o=s.limit;o%3Cs.total;o+=s.limit){const%20s=await%20l(e,r,o);t.push(...s.data)}}else%20s.data.forEach((e=%3E{const%20r=e.relationships.find((t=%3E%22cover_art%22===t.type));r%26%26(r.relationships=[{type:e.type,id:e.id}],t.push(r))}))}}return%20t})().then(r).catch(o)}))}().then((t=%3E{let%20e=0;r.forEach((o=%3E{const%20s=o.src||o.style.getPropertyValue(%22background-image%22);t.forEach((t=%3E{const%20n=t.relationships.find((t=%3E%22manga%22===t.type));if(n%26%26new%20RegExp(`${n.id}/${t.attributes.fileName}`).test(s)){const%20s=new%20Image;s.src=`https://mangadex.org/covers/${n.id}/${t.attributes.fileName}`,s.onload=()=%3E{const%20n=document.createElement(%22span%22),a=document.createElement(%22span%22),l=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22svg%22);if(t.attributes.description){n.setAttribute(%22title%22,t.attributes.description),l.classList.add(%22cover-data-bookmarklet-show-description%22),l.setAttribute(%22fill%22,%22none%22),l.setAttribute(%22viewBox%22,%220%200%2024%2024%22),l.setAttribute(%22stroke%22,%22currentColor%22);const%20e=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22path%22);e.setAttribute(%22stroke-linecap%22,%22round%22),e.setAttribute(%22stroke-linejoin%22,%22round%22),e.setAttribute(%22d%22,%22M11.25%2011.25l.041-.02a.75.75%200%20011.063.852l-.708%202.836a.75.75%200%20001.063.853l.041-.021M21%2012a9%209%200%2011-18%200%209%209%200%200118%200zm-9-3.75h.008v.008H12V8.25z%22),l.appendChild(e),l.addEventListener(%22click%22,(t=%3E{t.stopPropagation(),t.preventDefault(),a.style.setProperty(%22display%22,%22flex%22)})),n.appendChild(l);const%20r=document.createElement(%22span%22);r.innerText=t.attributes.description,r.style.setProperty(%22max-height%22,%22100%25%22),r.style.setProperty(%22margin%22,%220.2rem%22),r.style.setProperty(%22text-align%22,%22center%22),a.style.setProperty(%22position%22,%22absolute%22),a.style.setProperty(%22width%22,%22100%25%22),a.style.setProperty(%22height%22,%22100%25%22),a.style.setProperty(%22overflow-y%22,%22auto%22),a.style.setProperty(%22display%22,%22none%22),a.style.setProperty(%22align-items%22,%22center%22),a.style.setProperty(%22justify-content%22,%22center%22),a.style.setProperty(%22background-color%22,%22var(--md-accent)%22),a.addEventListener(%22click%22,(t=%3E{t.stopPropagation(),t.preventDefault(),a.style.setProperty(%22display%22,%22none%22)})),a.appendChild(r)}const%20c=document.createElement(%22span%22),d=document.createElement(%22span%22),p=`${s.width}x${s.height}`;var%20y,u;(d.innerText=p,d.setAttribute(%22title%22,p),c.style.setProperty(%22position%22,%22absolute%22),c.style.setProperty(%22top%22,%220%22),c.appendChild(d),o%20instanceof%20HTMLImageElement)%3F(c.style.setProperty(%22padding%22,%220.5rem%200.5rem%201rem%22),c.style.setProperty(%22color%22,%22%23fff%22),c.style.setProperty(%22left%22,%220%22),c.style.setProperty(%22width%22,%22100%25%22),c.style.setProperty(%22background%22,%22linear-gradient(0deg,transparent,rgba(0,0,0,0.8))%22),c.style.setProperty(%22border-top-right-radius%22,%220.25rem%22),c.style.setProperty(%22border-top-left-radius%22,%220.25rem%22),null===(y=o.parentElement)||void%200===y||y.appendChild(c),t.attributes.description%26%26(n.style.setProperty(%22position%22,%22absolute%22),n.style.setProperty(%22top%22,%220%22),n.style.setProperty(%22right%22,%220%22),n.style.setProperty(%22padding%22,%220.45rem%200.5rem%22),n.style.setProperty(%22color%22,%22%23fff%22),l.setAttribute(%22stroke-width%22,%221.5%22),l.style.setProperty(%22width%22,%221.5rem%22),l.style.setProperty(%22height%22,%221.5rem%22),a.style.setProperty(%22border-radius%22,%220.25rem%22),null===(u=o.parentElement)||void%200===u||u.append(n,a))):(c.style.setProperty(%22padding%22,%220%200.2rem%22),c.style.setProperty(%22background-color%22,%22var(--md-accent)%22),c.style.setProperty(%22border-bottom-left-radius%22,%224px%22),c.style.setProperty(%22border-bottom-right-radius%22,%224px%22),o.appendChild(c),t.attributes.description%26%26(c.style.setProperty(%22display%22,%22flex%22),c.style.setProperty(%22align-items%22,%22center%22),n.style.setProperty(%22margin-left%22,%220.2rem%22),l.setAttribute(%22stroke-width%22,%222%22),l.style.setProperty(%22width%22,%221.3rem%22),l.style.setProperty(%22height%22,%221.3rem%22),c.appendChild(n),o.appendChild(a)));i.update(++e/r.length*100)}}}))}))})).catch((t=%3E{console.error(t),alert(%22Failed%20to%20fetch%20cover%20data!%22)}))}));})();
