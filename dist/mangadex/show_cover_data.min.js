javascript:(function(){function%20e(e,t,r=0){const%20o=e.match(t);if(o%26%26o[r])return%20o[r]}function%20t(e,t=100){const%20r=[...e],o=[];for(;r.length;)o.push(r.splice(0,t));return%20o}function%20r(e){const%20t=localStorage.getItem(e);if(t)return%20JSON.parse(t)}function%20o({fill:e=%22none%22,viewBox:t=%220%200%2024%2024%22,stroke:r=%22currentColor%22,strokeLinecap:o=%22round%22,strokeLinejoin:s=%22round%22,d:n=%22%22}){const%20a=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22svg%22);a.setAttribute(%22fill%22,e),a.setAttribute(%22viewBox%22,t),a.setAttribute(%22stroke%22,r);const%20i=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22path%22);return%20i.setAttribute(%22stroke-linecap%22,o),i.setAttribute(%22stroke-linejoin%22,s),i.setAttribute(%22d%22,n),a.appendChild(i),a}const%20s=e(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||e(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1);function%20n(e,t,r){return(t=function(e){var%20t=function(e,t){if(%22object%22!=typeof%20e||null===e)return%20e;var%20r=e[Symbol.toPrimitive];if(void%200!==r){var%20o=r.call(e,t||%22default%22);if(%22object%22!=typeof%20o)return%20o;throw%20new%20TypeError(%22%40%40toPrimitive%20must%20return%20a%20primitive%20value.%22)}return(%22string%22===t%3FString:Number)(e)}(e,%22string%22);return%22symbol%22==typeof%20t%3Ft:String(t)}(t))in%20e%3FObject.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable%22)||r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary%22);class%20a{constructor(e=0){n(this,%22addToDocument%22,(()=%3Edocument.body.appendChild(this.element))),n(this,%22removeFromDocument%22,(()=%3Ethis.element.remove()));const%20t=document.createElement(%22div%22);t.style.setProperty(%22z-index%22,%221000%22),t.style.setProperty(%22position%22,%22fixed%22),t.style.setProperty(%22bottom%22,%220%22),t.style.setProperty(%22left%22,%220%22),t.style.setProperty(%22width%22,%22100%25%22),t.style.setProperty(%22height%22,%2224px%22),t.style.setProperty(%22background-color%22,%22%233c3c3c%22),t.style.setProperty(%22cursor%22,%22pointer%22);const%20r=document.createElement(%22div%22);r.style.setProperty(%22height%22,%22100%25%22),r.style.setProperty(%22background-color%22,%22%23b5e853%22),r.style.setProperty(%22transition%22,%22width%20200ms%22),this.bar=r,this.update(e),t.appendChild(r),t.addEventListener(%22click%22,this.removeFromDocument),this.element=t}update(e){const%20t=Math.ceil(parseInt(this.bar.style.getPropertyValue(%22width%22))),r=Math.ceil(e);r%3E=100%3Fthis.removeFromDocument():t!==r%26%26r%3E=0%26%26this.bar.style.setProperty(%22width%22,`${r}%25`)}}((e,t={})=%3E{(function(e,t){if(!new%20RegExp(e).test(window.location.hostname))return%20alert(%22Bookmarklet%20executed%20on%20a%20wrong%20website!%22);t()})(%22^mangadex.org|canary.mangadex.dev%22,(()=%3E{const%20r=t.createPage%26%26/\/create\//.test(window.location.pathname);return!t.titlePage||s||r%3F!t.editPage||/\/edit\//.test(window.location.pathname)||r%3Fvoid%20e():alert(%22This%20is%20not%20an%20edit%20page!%22):alert(%22This%20is%20not%20a%20title%20page!%22)}))})((()=%3E{const%20r=100,s=1e3,n=[],i=new%20Map,l=new%20Map,c={manga:[],cover:[]},d=new%20a;if(document.querySelectorAll(%22img,%20div%22).forEach((t=%3E{const%20r=t.src||t.style.getPropertyValue(%22background-image%22);if(!/\/covers\/+[-0-9a-f]{20,}\/+[-0-9a-f]{20,}[^/]+(%3F:[%3F%23].*)%3F$/.test(r)||t.classList.contains(%22banner-image%22))return;const%20o=e(r,/[-0-9a-f]{20,}/),s=e(r,/([-0-9a-f]{20,}\.[^/.]*)\.[0-9]+\.[^/.%3F%23]*([%3F%23].*)%3F$/,1)||e(r,/[-0-9a-f]{20,}\.[^/.]*%3F$/);if(!o||!s)return;const%20a=e=%3E{var%20t;e.has(o)%3Fnull===(t=e.get(o))||void%200===t||t.add(s):e.set(o,new%20Set([s]))};%22executed%22!==t.getAttribute(%22cover-data-bookmarklet%22)%3F(n.push(t),t.setAttribute(%22cover-data-bookmarklet%22,%22executed%22),a(i)):a(l)})),i.size%3C=0)return%20document.querySelector('[cover-data-bookmarklet=%22executed%22]')%3Falert(%22No%20new%20covers%20were%20found%20on%20this%20page%20since%20the%20last%20time%20this%20bookmarklet%20was%20executed!%22):alert(%22No%20covers%20were%20found%20on%20this%20page!%22);function%20p(e,t,r,s){const%20n=document.createElement(%22span%22),a=document.createElement(%22span%22),i=o({d:%22M11.25%2011.25l.041-.02a.75.75%200%20011.063.852l-.708%202.836a.75.75%200%20001.063.853l.041-.021M21%2012a9%209%200%2011-18%200%209%209%200%200118%200zm-9-3.75h.008v.008H12V8.25z%22});a.classList.add(%22cover-data-bookmarklet-description%22);const%20l=document.createElement(%22span%22);l.setAttribute(%22cover-data-cover-id%22,s.id),l.setAttribute(%22title%22,%22Copy%20Cover%20ID%22);const%20c=o({d:%22M8.25%207.5V6.108c0-1.135.845-2.098%201.976-2.192.373-.03.748-.057%201.123-.08M15.75%2018H18a2.25%202.25%200%20002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424%2048.424%200%2000-1.123-.08M15.75%2018.75v-1.875a3.375%203.375%200%2000-3.375-3.375h-1.5a1.125%201.125%200%2001-1.125-1.125v-1.5A3.375%203.375%200%20006.375%207.5H5.25m11.9-3.664A2.251%202.251%200%200015%202.25h-1.5a2.251%202.251%200%2000-2.15%201.586m5.8%200c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75%207.5H4.875c-.621%200-1.125.504-1.125%201.125v12c0%20.621.504%201.125%201.125%201.125h9.75c.621%200%201.125-.504%201.125-1.125V16.5a9%209%200%2000-9-9z%22});if(c.addEventListener(%22click%22,(e=%3E{const%20t=e=%3E{navigator.clipboard.writeText(e).then((()=%3Econsole.debug(`Copied%20cover%20ids:%20${e}`)),(()=%3Econsole.error(`Failed%20to%20copy%20cover%20ids:%20${e}`))).catch(console.error)};if(e.stopPropagation(),e.preventDefault(),e.shiftKey){const%20e=[];document.querySelectorAll(%22span[cover-data-cover-id]%22).forEach((t=%3E{const%20r=t.getAttribute(%22cover-data-cover-id%22);r%26%26!e.includes(r)%26%26e.push(r)})),t(e.join(%22%20%22))}else%20t(s.id)})),l.appendChild(c),s.attributes.description){const%20e=(e,t=!0)=%3E{const%20r=e=%3Ee.style.setProperty(%22display%22,t%3F%22flex%22:%22none%22);e.stopPropagation(),e.preventDefault(),e.shiftKey%3Fdocument.querySelectorAll(%22.cover-data-bookmarklet-description%22).forEach((e=%3Er(e))):r(a)};n.setAttribute(%22title%22,s.attributes.description),i.addEventListener(%22click%22,e),n.appendChild(i);const%20t=document.createElement(%22span%22);t.innerText=s.attributes.description,t.style.setProperty(%22max-height%22,%22100%25%22),t.style.setProperty(%22margin%22,%220.2rem%22),t.style.setProperty(%22text-align%22,%22center%22),a.style.setProperty(%22position%22,%22absolute%22),a.style.setProperty(%22width%22,%22100%25%22),a.style.setProperty(%22height%22,%22100%25%22),a.style.setProperty(%22overflow-y%22,%22auto%22),a.style.setProperty(%22display%22,%22none%22),a.style.setProperty(%22align-items%22,%22center%22),a.style.setProperty(%22justify-content%22,%22center%22),a.style.setProperty(%22background-color%22,%22var(--md-accent)%22),a.style.setProperty(%22z-index%22,%224%22),a.addEventListener(%22click%22,(t=%3Ee(t,!1))),a.appendChild(t)}const%20d=document.createElement(%22span%22),p=document.createElement(%22span%22),y=`${t}x${r}`;p.innerText=y,p.setAttribute(%22title%22,y),d.style.setProperty(%22position%22,%22absolute%22),d.style.setProperty(%22top%22,%220%22),d.appendChild(p);const%20u=document.createElement(%22div%22);if(u.style.setProperty(%22display%22,%22flex%22),u.style.setProperty(%22flex-wrap%22,%22nowrap%22),u.style.setProperty(%22gap%22,%220.2rem%22),e%20instanceof%20HTMLImageElement){var%20m,h;if(d.style.setProperty(%22padding%22,%220.5rem%200.5rem%201rem%22),d.style.setProperty(%22color%22,%22%23fff%22),d.style.setProperty(%22left%22,%220%22),d.style.setProperty(%22width%22,%22100%25%22),d.style.setProperty(%22background%22,%22linear-gradient(0deg,transparent,rgba(0,0,0,0.8))%22),d.style.setProperty(%22border-top-right-radius%22,%220.25rem%22),d.style.setProperty(%22border-top-left-radius%22,%220.25rem%22),u.style.setProperty(%22position%22,%22absolute%22),u.style.setProperty(%22top%22,%220%22),u.style.setProperty(%22right%22,%220%22),u.style.setProperty(%22padding%22,%220.45rem%200.5rem%22),u.style.setProperty(%22color%22,%22%23fff%22),s.attributes.description)i.setAttribute(%22stroke-width%22,%221.5%22),i.style.setProperty(%22width%22,%221.5rem%22),i.style.setProperty(%22height%22,%221.5rem%22),a.style.setProperty(%22border-radius%22,%220.25rem%22),null===(h=e.parentElement)||void%200===h||h.append(a),u.appendChild(n);c.setAttribute(%22stroke-width%22,%221.5%22),c.style.setProperty(%22width%22,%221.5rem%22),c.style.setProperty(%22height%22,%221.5rem%22),u.appendChild(l),null===(m=e.parentElement)||void%200===m||m.append(d,u)}else%20d.style.setProperty(%22padding%22,%220%200.2rem%22),d.style.setProperty(%22background-color%22,%22var(--md-accent)%22),d.style.setProperty(%22border-bottom-left-radius%22,%224px%22),d.style.setProperty(%22border-bottom-right-radius%22,%224px%22),e.appendChild(d),u.style.setProperty(%22margin-left%22,%220.2rem%22),d.style.setProperty(%22display%22,%22flex%22),d.style.setProperty(%22flex-wrap%22,%22nowrap%22),d.style.setProperty(%22align-items%22,%22center%22),s.attributes.description%26%26(i.setAttribute(%22stroke-width%22,%222%22),i.style.setProperty(%22width%22,%221.3rem%22),i.style.setProperty(%22height%22,%221.3rem%22),e.appendChild(a),u.appendChild(n)),c.setAttribute(%22stroke-width%22,%222%22),c.style.setProperty(%22width%22,%221.3rem%22),c.style.setProperty(%22height%22,%221.3rem%22),u.appendChild(l),d.appendChild(u),e.appendChild(d)}function%20y(e,t,o=0){return%20new%20Promise(((n,a)=%3E{const%20i=%22cover%22===t,l=e.map((e=%3Ei%3F`manga[]=${e}`:`ids[]=${e}`)).join(%22%26%22);let%20c=`https://api.mangadex.org/${t}%3F${l}%26includes[]=cover_art%26limit=${r}%26contentRating[]=safe%26contentRating[]=suggestive%26contentRating[]=erotica%26contentRating[]=pornographic%26offset=${o}`;if(i%26%26(c=`https://api.mangadex.org/${t}%3Forder[volume]=asc%26${l}%26limit=${r}%26offset=${o}`),o%3Es)return%20a(new%20Error(`Offset%20is%20bigger%20than%20${s}:\n%20${c}`));fetch(c).then((e=%3En(e.json()))).catch(a)}))}d.addToDocument(),i.forEach(((e,t)=%3E{var%20r;const%20o=(null===(r=l.get(t))||void%200===r%3Fvoid%200:r.size)||0;e.size+o%3E1%3Fc.cover.push(t):c.manga.push(t)})),function(){const%20e=[];return%20new%20Promise(((r,o)=%3E{(async%20function(){for(const%20r%20in%20c){const%20o=%22cover%22===r,s=t(c[r]);for(const%20t%20of%20s){const%20s=await%20y(t,r);if(o){e.push(...s.data);for(let%20o=s.limit;o%3Cs.total;o+=s.limit){const%20s=await%20y(t,r,o);e.push(...s.data)}}else%20s.data.forEach((t=%3E{const%20r=t.relationships.find((e=%3E%22cover_art%22===e.type));r%26%26(r.relationships=[{type:t.type,id:t.id}],e.push(r))}))}}return%20e})().then(r).catch(o)}))}().then((e=%3E{let%20t=0;const%20r=document.createElement(%22div%22);r.style.setProperty(%22opacity%22,%220%22),r.style.setProperty(%22position%22,%22absolute%22),r.style.setProperty(%22top%22,%22-10000px%22),r.style.setProperty(%22z-index%22,%22-10000%22),r.style.setProperty(%22pointer-events%22,%22none%22),document.body.appendChild(r),n.forEach((o=%3E{const%20s=o.src||o.style.getPropertyValue(%22background-image%22);e.forEach((e=%3E{const%20a=e.relationships.find((e=%3E%22manga%22===e.type));if(a%26%26new%20RegExp(`${a.id}/${e.attributes.fileName}`).test(s)){const%20s=new%20Image;r.appendChild(s);try{new%20ResizeObserver(((a,i)=%3E{const%20l=s.naturalWidth,c=s.naturalHeight;l%3E0%26%26c%3E0%26%26(i.disconnect(),s.remove(),s.src=%22data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NgAAIAAAUAAR4f7BQAAAAASUVORK5CYII=%22,r.children.length%3C=0%26%26r.remove(),p(o,l,c,e),d.update(++t/n.length*100))})).observe(s)}catch(a){s.onload=()=%3E{s.remove(),r.children.length%3C=0%26%26r.remove(),p(o,s.naturalWidth,s.naturalHeight,e),d.update(++t/n.length*100)}}s.src=`https://mangadex.org/covers/${a.id}/${e.attributes.fileName}`}}))}))})).catch((e=%3E{console.error(e),alert(%22Failed%20to%20fetch%20cover%20data!%22)}))}));})();
