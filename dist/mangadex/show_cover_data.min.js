javascript:(function(){function%20e(e,t,r=0){const%20o=e.match(t);if(o%26%26o[r])return%20o[r]}function%20t(e,t=100){const%20r=[...e],o=[];for(;r.length;)o.push(r.splice(0,t));return%20o}function%20r(e){const%20t=localStorage.getItem(e);if(t)return%20JSON.parse(t)}const%20o=e(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||e(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1);function%20n(e,t,r){return(t=function(e){var%20t=function(e,t){if(%22object%22!=typeof%20e||null===e)return%20e;var%20r=e[Symbol.toPrimitive];if(void%200!==r){var%20o=r.call(e,t||%22default%22);if(%22object%22!=typeof%20o)return%20o;throw%20new%20TypeError(%22%40%40toPrimitive%20must%20return%20a%20primitive%20value.%22)}return(%22string%22===t%3FString:Number)(e)}(e,%22string%22);return%22symbol%22==typeof%20t%3Ft:String(t)}(t))in%20e%3FObject.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable%22)||r(%22oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary%22);class%20s{constructor(e=0){n(this,%22addToDocument%22,(()=%3Edocument.body.appendChild(this.element))),n(this,%22removeFromDocument%22,(()=%3Ethis.element.remove()));const%20t=document.createElement(%22div%22);t.style.setProperty(%22z-index%22,%221000%22),t.style.setProperty(%22position%22,%22fixed%22),t.style.setProperty(%22bottom%22,%220%22),t.style.setProperty(%22left%22,%220%22),t.style.setProperty(%22width%22,%22100%25%22),t.style.setProperty(%22height%22,%2224px%22),t.style.setProperty(%22background-color%22,%22%233c3c3c%22),t.style.setProperty(%22cursor%22,%22pointer%22);const%20r=document.createElement(%22div%22);r.style.setProperty(%22height%22,%22100%25%22),r.style.setProperty(%22background-color%22,%22%23b5e853%22),r.style.setProperty(%22transition%22,%22width%20200ms%22),this.bar=r,this.update(e),t.appendChild(r),t.addEventListener(%22click%22,this.removeFromDocument),this.element=t}update(e){const%20t=Math.ceil(parseInt(this.bar.style.getPropertyValue(%22width%22))),r=Math.ceil(e);r%3E=100%3Fthis.removeFromDocument():t!==r%26%26r%3E=0%26%26this.bar.style.setProperty(%22width%22,`${r}%25`)}}((e,t={})=%3E{(function(e,t){if(!new%20RegExp(e).test(window.location.hostname))return%20alert(%22Bookmarklet%20executed%20on%20a%20wrong%20website!%22);t()})(%22^mangadex.org|canary.mangadex.dev%22,(()=%3E{const%20r=t.createPage%26%26/\/create\//.test(window.location.pathname);return!t.titlePage||o||r%3F!t.editPage||/\/edit\//.test(window.location.pathname)||r%3Fvoid%20e():alert(%22This%20is%20not%20an%20edit%20page!%22):alert(%22This%20is%20not%20a%20title%20page!%22)}))})((()=%3E{const%20r=100,o=1e3,n=[],i=new%20Map,a=new%20Map,l={manga:[],cover:[]},c=new%20s;if(document.querySelectorAll(%22img,%20div%22).forEach((t=%3E{const%20r=t.src||t.style.getPropertyValue(%22background-image%22);if(!/\/covers\/+[-0-9a-f]{20,}\/+[-0-9a-f]{20,}[^/]+(%3F:[%3F%23].*)%3F$/.test(r)||t.classList.contains(%22banner-image%22))return;const%20o=e(r,/[-0-9a-f]{20,}/),s=e(r,/([-0-9a-f]{20,}\.[^/.]*)\.[0-9]+\.[^/.%3F%23]*([%3F%23].*)%3F$/,1)||e(r,/[-0-9a-f]{20,}\.[^/.]*%3F$/);if(!o||!s)return;const%20l=e=%3E{var%20t;e.has(o)%3Fnull===(t=e.get(o))||void%200===t||t.add(s):e.set(o,new%20Set([s]))};%22executed%22!==t.getAttribute(%22cover-data-bookmarklet%22)%3F(n.push(t),t.setAttribute(%22cover-data-bookmarklet%22,%22executed%22),l(i)):l(a)})),i.size%3C=0)return%20document.querySelector('[cover-data-bookmarklet=%22executed%22]')%3Falert(%22No%20new%20covers%20were%20found%20on%20this%20page%20since%20the%20last%20time%20this%20bookmarklet%20was%20executed!%22):alert(%22No%20covers%20were%20found%20on%20this%20page!%22);function%20d(e,t,r,o){e.setAttribute(%22cover-data-cover-id%22,o.id);const%20n=document.createElement(%22span%22),s=document.createElement(%22span%22),i=function({fill:e=%22none%22,viewBox:t=%220%200%2024%2024%22,stroke:r=%22currentColor%22,strokeLinecap:o=%22round%22,strokeLinejoin:n=%22round%22,d:s=%22%22}){const%20i=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22svg%22);i.setAttribute(%22fill%22,e),i.setAttribute(%22viewBox%22,t),i.setAttribute(%22stroke%22,r);const%20a=document.createElementNS(%22http://www.w3.org/2000/svg%22,%22path%22);return%20a.setAttribute(%22stroke-linecap%22,o),a.setAttribute(%22stroke-linejoin%22,n),a.setAttribute(%22d%22,s),i.appendChild(a),i}({d:%22M11.25%2011.25l.041-.02a.75.75%200%20011.063.852l-.708%202.836a.75.75%200%20001.063.853l.041-.021M21%2012a9%209%200%2011-18%200%209%209%200%200118%200zm-9-3.75h.008v.008H12V8.25z%22});if(s.classList.add(%22cover-data-bookmarklet-description%22),o.attributes.description){const%20e=(e,t=!0)=%3E{const%20r=e=%3Ee.style.setProperty(%22display%22,t%3F%22flex%22:%22none%22);e.stopPropagation(),e.preventDefault(),e.shiftKey%3Fdocument.querySelectorAll(%22.cover-data-bookmarklet-description%22).forEach((e=%3Er(e))):r(s)};n.setAttribute(%22title%22,o.attributes.description),i.addEventListener(%22click%22,e),n.appendChild(i);const%20t=document.createElement(%22span%22);t.innerText=o.attributes.description,t.style.setProperty(%22max-height%22,%22100%25%22),t.style.setProperty(%22margin%22,%220.2rem%22),t.style.setProperty(%22text-align%22,%22center%22),s.style.setProperty(%22position%22,%22absolute%22),s.style.setProperty(%22width%22,%22100%25%22),s.style.setProperty(%22height%22,%22100%25%22),s.style.setProperty(%22overflow-y%22,%22auto%22),s.style.setProperty(%22display%22,%22none%22),s.style.setProperty(%22align-items%22,%22center%22),s.style.setProperty(%22justify-content%22,%22center%22),s.style.setProperty(%22background-color%22,%22var(--md-accent)%22),s.style.setProperty(%22z-index%22,%224%22),s.addEventListener(%22click%22,(t=%3Ee(t,!1))),s.appendChild(t)}const%20a=document.createElement(%22span%22),l=document.createElement(%22span%22),c=`${t}x${r}`;l.innerText=c,l.setAttribute(%22title%22,c+%22\n(click%20to%20copy%20id)%22),l.addEventListener(%22click%22,(e=%3E{const%20t=e=%3E{navigator.clipboard.writeText(e).then((()=%3Econsole.debug(`Copied%20cover%20ids:%20${e}`)),(()=%3Econsole.error(`Failed%20to%20copy%20cover%20ids:%20${e}`))).catch(console.error)};if(e.stopPropagation(),e.preventDefault(),e.shiftKey){const%20e=[];document.querySelectorAll(%22[cover-data-cover-id]%22).forEach((t=%3E{const%20r=t.getAttribute(%22cover-data-cover-id%22);r%26%26!e.includes(r)%26%26e.push(r)})),t(e.join(%22%20%22))}else%20t(o.id)})),a.style.setProperty(%22position%22,%22absolute%22),a.style.setProperty(%22top%22,%220%22),a.appendChild(l);const%20d=document.createElement(%22div%22);if(d.style.setProperty(%22display%22,%22flex%22),d.style.setProperty(%22flex-wrap%22,%22nowrap%22),d.style.setProperty(%22gap%22,%220.2rem%22),e%20instanceof%20HTMLImageElement){var%20p,y;if(a.style.setProperty(%22padding%22,%220.5rem%200.5rem%201rem%22),a.style.setProperty(%22color%22,%22%23fff%22),a.style.setProperty(%22left%22,%220%22),a.style.setProperty(%22width%22,%22100%25%22),a.style.setProperty(%22background%22,%22linear-gradient(0deg,transparent,rgba(0,0,0,0.8))%22),a.style.setProperty(%22border-top-right-radius%22,%220.25rem%22),a.style.setProperty(%22border-top-left-radius%22,%220.25rem%22),d.style.setProperty(%22position%22,%22absolute%22),d.style.setProperty(%22top%22,%220%22),d.style.setProperty(%22right%22,%220%22),d.style.setProperty(%22padding%22,%220.45rem%200.5rem%22),d.style.setProperty(%22color%22,%22%23fff%22),o.attributes.description)i.setAttribute(%22stroke-width%22,%221.5%22),i.style.setProperty(%22width%22,%221.5rem%22),i.style.setProperty(%22height%22,%221.5rem%22),s.style.setProperty(%22border-radius%22,%220.25rem%22),null===(y=e.parentElement)||void%200===y||y.append(s),d.appendChild(n);null===(p=e.parentElement)||void%200===p||p.append(a,d)}else%20a.style.setProperty(%22padding%22,%220%200.2rem%22),a.style.setProperty(%22background-color%22,%22var(--md-accent)%22),a.style.setProperty(%22border-bottom-left-radius%22,%224px%22),a.style.setProperty(%22border-bottom-right-radius%22,%224px%22),e.appendChild(a),d.style.setProperty(%22margin-left%22,%220.2rem%22),a.style.setProperty(%22display%22,%22flex%22),a.style.setProperty(%22flex-wrap%22,%22nowrap%22),a.style.setProperty(%22align-items%22,%22center%22),o.attributes.description%26%26(i.setAttribute(%22stroke-width%22,%222%22),i.style.setProperty(%22width%22,%221.3rem%22),i.style.setProperty(%22height%22,%221.3rem%22),e.appendChild(s),d.appendChild(n)),a.appendChild(d),e.appendChild(a)}function%20p(e,t,n=0){return%20new%20Promise(((s,i)=%3E{const%20a=%22cover%22===t,l=e.map((e=%3Ea%3F`manga[]=${e}`:`ids[]=${e}`)).join(%22%26%22);let%20c=`https://api.mangadex.org/${t}%3F${l}%26includes[]=cover_art%26limit=${r}%26contentRating[]=safe%26contentRating[]=suggestive%26contentRating[]=erotica%26contentRating[]=pornographic%26offset=${n}`;if(a%26%26(c=`https://api.mangadex.org/${t}%3Forder[volume]=asc%26${l}%26limit=${r}%26offset=${n}`),n%3Eo)return%20i(new%20Error(`Offset%20is%20bigger%20than%20${o}:\n%20${c}`));fetch(c).then((e=%3Es(e.json()))).catch(i)}))}c.addToDocument(),i.forEach(((e,t)=%3E{var%20r;const%20o=(null===(r=a.get(t))||void%200===r%3Fvoid%200:r.size)||0;e.size+o%3E1%3Fl.cover.push(t):l.manga.push(t)})),function(){const%20e=[];return%20new%20Promise(((r,o)=%3E{(async%20function(){for(const%20r%20in%20l){const%20o=%22cover%22===r,n=t(l[r]);for(const%20t%20of%20n){const%20n=await%20p(t,r);if(o){e.push(...n.data);for(let%20o=n.limit;o%3Cn.total;o+=n.limit){const%20n=await%20p(t,r,o);e.push(...n.data)}}else%20n.data.forEach((t=%3E{const%20r=t.relationships.find((e=%3E%22cover_art%22===e.type));r%26%26(r.relationships=[{type:t.type,id:t.id}],e.push(r))}))}}return%20e})().then(r).catch(o)}))}().then((e=%3E{let%20t=0;const%20r=document.createElement(%22div%22);r.style.setProperty(%22width%22,%22fit-content%22),r.style.setProperty(%22height%22,%22fit-content%22),r.style.setProperty(%22opacity%22,%220%22),r.style.setProperty(%22position%22,%22absolute%22),r.style.setProperty(%22top%22,%22-10000px%22),r.style.setProperty(%22z-index%22,%22-10000%22),r.style.setProperty(%22pointer-events%22,%22none%22),document.body.appendChild(r),n.forEach((o=%3E{const%20s=o.src||o.style.getPropertyValue(%22background-image%22);e.forEach((e=%3E{const%20i=e.relationships.find((e=%3E%22manga%22===e.type));if(i%26%26new%20RegExp(`${i.id}/${e.attributes.fileName}`).test(s)){const%20s=new%20Image;r.appendChild(s);try{new%20ResizeObserver(((i,a)=%3E{const%20l=s.naturalWidth,p=s.naturalHeight;l%3E0%26%26p%3E0%26%26(a.disconnect(),s.remove(),s.src=%22data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NgAAIAAAUAAR4f7BQAAAAASUVORK5CYII=%22,r.children.length%3C=0%26%26r.remove(),d(o,l,p,e),c.update(++t/n.length*100))})).observe(s)}catch(i){s.onload=()=%3E{s.remove(),r.children.length%3C=0%26%26r.remove(),d(o,s.naturalWidth,s.naturalHeight,e),c.update(++t/n.length*100)}}s.src=`https://mangadex.org/covers/${i.id}/${e.attributes.fileName}`}}))}))})).catch((e=%3E{console.error(e),alert(%22Failed%20to%20fetch%20cover%20data!%22)}))}));})();
