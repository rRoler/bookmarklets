javascript:(() => {function t(t,e,a=0){const n=t.match(e);if(n&&n[a])return n[a]}function e(t){const e=localStorage.getItem(t);if(e)return JSON.parse(e)}const a=t(window.location.pathname,/\/title\/+([-0-9a-f]{20,})/,1)||t(window.location.pathname,/\/title\/edit\/+([-0-9a-f]{20,})/,1),n=/draft=true/.test(window.location.search);function o(){const t=e("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable")||e("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary");return new Promise(((e,o)=>fetch(`https://api.mangadex.org/manga${n?"/draft/":"/"}${a}`,{headers:{Authorization:n?`${t.token_type} ${t.access_token}`:""}}).then((t=>e(t.json()))).catch((t=>{alert("Failed to fetch title info!"),o(t)}))))}((t,e={})=>{(function(t,e){if(!new RegExp(t).test(window.location.hostname))return alert("Bookmarklet executed on a wrong website!");e()})("^mangadex.org|canary.mangadex.dev",(()=>{const n=e.createPage&&/\/create\//.test(window.location.pathname);return!e.titlePage||a||n?!e.editPage||/\/edit\//.test(window.location.pathname)||n?void t():alert("This is not an edit page!"):alert("This is not a title page!")}))})((()=>{const t={al:"https://anilist.co/search/manga?search=",ap:"https://www.anime-planet.com/manga/all?name=",kt:"https://kitsu.io/manga?subtype=manga&text=",mu:"https://www.mangaupdates.com/search.html?search=",mal:"https://myanimelist.net/manga.php?q=",nu:"https://www.novelupdates.com/?s=",bw:"https://bookwalker.jp/search/?qcat=2&word=",amz:"https://www.amazon.co.jp/s?rh=n:466280&k=",ebj:"https://ebookjapan.yahoo.co.jp/search/?keyword=",cdj:"https://www.cdjapan.co.jp/searchuni?term.media_format=BOOK&q="};if(/\/create\/title/.test(window.location.pathname)){const e=prompt("Enter a title to search for");if(!e)return;for(const a in t)window.open(t[a]+e,"_blank","noopener,noreferrer")}else o().then((e=>{e.data.attributes.tags.some((t=>"Adaptation"===t.attributes.name.en))||delete t.nu;const a=Object.keys(t).filter((t=>!e.data.attributes.links[t]));if(a.length<=0)return alert("All links are already added!");const n=e.data.attributes.originalLanguage;let o;try{o=e.data.attributes.altTitles.find((t=>t[n]))}catch(t){console.debug("No alt titles found")}const r=Object.keys(e.data.attributes.title)[0];let i=o?o[n]:e.data.attributes.title[r]||"";i=prompt("Enter a title to search for",i),i&&a.forEach((e=>window.open(t[e]+i,"_blank","noopener,noreferrer")))}))}),{titlePage:!0,createPage:!0});})();
