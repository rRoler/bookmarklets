/*!
 * Licensed under MIT: https://github.com/rRoler/bookmarklets/raw/main/LICENSE
 * Third party licenses: https://github.com/rRoler/bookmarklets/raw/main/dist/mangadex-open_links-v1.5.dependencies.txt
 */

javascript:(() => {function t(t){const e=localStorage.getItem(t);if(e)return JSON.parse(e)}const e={titleId:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=t.match(e);if(n&&n[a])return n[a]}(window.location.pathname,/\/title\/(?:edit\/)?([-0-9a-f]{20,})/,1),isDraft:/draft=true/.test(window.location.search)},a=(t,e)=>function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new URL(t);n.pathname=e;for(const t in a){const e=a[t];if(Array.isArray(e))for(const a of e)n.searchParams.append(t,a);else n.searchParams.set(t,e.toString())}return n}("https://api.mangadex.org",t,e);function n(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.titleId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isDraft;const i=t("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-stable")||t("oidc.user:https://auth.mangadex.org/realms/mangadex:mangadex-frontend-canary");return new Promise(((t,e)=>fetch(a(`/manga${o?"/draft/":"/"}${n}`),{headers:{Authorization:o?`${i.token_type} ${i.access_token}`:""}}).then((e=>t(e.json()))).catch(e)))}(function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!new RegExp(t).test(window.location.hostname))return alert("Bookmarklet executed on the wrong website!");e()})("^mangadex.org|canary.mangadex.dev",(()=>{const n=a.createPage&&/\/create\//.test(window.location.pathname),o="You can execute this bookmarklet only on ";return!a.titlePage||e.titleId||n?!a.editPage||/\/edit\//.test(window.location.pathname)||n?void t():alert(o+"an edit page!"):alert(o+"a title page!")}))})((()=>{n().then((t=>{const e={al:"https://anilist.co/manga/",ap:"https://www.anime-planet.com/manga/",kt:"https://kitsu.io/manga/",mu:/[A-Za-z]/.test(t.data.attributes.links.mu)?"https://www.mangaupdates.com/series/":"https://www.mangaupdates.com/series.html?id=",mal:"https://myanimelist.net/manga/",nu:"https://www.novelupdates.com/series/",bw:"https://bookwalker.jp/",amz:"",ebj:"",cdj:""};for(const a in t.data.attributes.links){const n=(e[a]||"")+t.data.attributes.links[a];window.open(n,"_blank","noopener,noreferrer")}}))}),{titlePage:!0});})();
