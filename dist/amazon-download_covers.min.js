javascript:(function(){function%20e(e,t,n=0){const%20o=e.match(t);if(o%26%26o[n])return%20o[n]}var%20t=Uint8Array,n=Uint16Array,o=Int32Array,r=new%20t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new%20t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=function(e,t){for(var%20r=new%20n(31),i=0;i%3C31;++i)r[i]=t+=1%3C%3Ce[i-1];var%20a=new%20o(r[30]);for(i=1;i%3C30;++i)for(var%20s=r[i];s%3Cr[i+1];++s)a[s]=s-r[i]%3C%3C5|i;return{b:r,r:a}},s=a(r,2),c=s.b,l=s.r;c[28]=258,l[258]=28,a(i,0);for(var%20u=new%20n(32768),f=0;f%3C32768;++f){var%20d=(43690%26f)%3E%3E1|(21845%26f)%3C%3C1;d=(61680%26(d=(52428%26d)%3E%3E2|(13107%26d)%3C%3C2))%3E%3E4|(3855%26d)%3C%3C4,u[f]=((65280%26d)%3E%3E8|(255%26d)%3C%3C8)%3E%3E1}var%20h=new%20t(288);for(f=0;f%3C144;++f)h[f]=8;for(f=144;f%3C256;++f)h[f]=9;for(f=256;f%3C280;++f)h[f]=7;for(f=280;f%3C288;++f)h[f]=8;var%20p=new%20t(32);for(f=0;f%3C32;++f)p[f]=5;var%20m=[%22unexpected%20EOF%22,%22invalid%20block%20type%22,%22invalid%20length/literal%22,%22invalid%20distance%22,%22stream%20finished%22,%22no%20stream%20handler%22,,%22no%20callback%22,%22invalid%20UTF-8%20data%22,%22extra%20field%20too%20long%22,%22date%20not%20in%20range%201980-2099%22,%22filename%20too%20long%22,%22stream%20finishing%22,%22invalid%20zip%20data%22],v=function(e,t,n){var%20o=new%20Error(t||m[e]);if(o.code=e,Error.captureStackTrace%26%26Error.captureStackTrace(o,v),!n)throw%20o;return%20o},g=new%20t(0),w=function(){for(var%20e=new%20Int32Array(256),t=0;t%3C256;++t){for(var%20n=t,o=9;--o;)n=(1%26n%26%26-306674912)^n%3E%3E%3E1;e[t]=n}return%20e}(),y=function(e,t,n){for(;n;++t)e[t]=n,n%3E%3E%3E=8},b=%22undefined%22!=typeof%20TextEncoder%26%26new%20TextEncoder,A=%22undefined%22!=typeof%20TextDecoder%26%26new%20TextDecoder;try{A.decode(g,{stream:!0}),1}catch(e){}function%20E(e,n){if(n){for(var%20o=new%20t(e.length),r=0;r%3Ce.length;++r)o[r]=e.charCodeAt(r);return%20o}if(b)return%20b.encode(e);var%20i=e.length,a=new%20t(e.length+(e.length%3E%3E1)),s=0,c=function(e){a[s++]=e};for(r=0;r%3Ci;++r){if(s+5%3Ea.length){var%20l=new%20t(s+8+(i-r%3C%3C1));l.set(a),a=l}var%20u=e.charCodeAt(r);u%3C128||n%3Fc(u):u%3C2048%3F(c(192|u%3E%3E6),c(128|63%26u)):u%3E55295%26%26u%3C57344%3F(c(240|(u=65536+(1047552%26u)|1023%26e.charCodeAt(++r))%3E%3E18),c(128|u%3E%3E12%2663),c(128|u%3E%3E6%2663),c(128|63%26u)):(c(224|u%3E%3E12),c(128|u%3E%3E6%2663),c(128|63%26u))}return%20function(e,n,o){(null==n||n%3C0)%26%26(n=0),(null==o||o%3Ee.length)%26%26(o=e.length);var%20r=new%20t(o-n);return%20r.set(e.subarray(n,o)),r}(a,0,s)}var%20k,x=function(e){var%20t=0;if(e)for(var%20n%20in%20e){var%20o=e[n].length;o%3E65535%26%26v(9),t+=o+4}return%20t},T=function(e,t,n,o,r,i,a,s){var%20c=o.length,l=n.extra,u=s%26%26s.length,f=x(l);y(e,t,null!=a%3F33639248:67324752),t+=4,null!=a%26%26(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag%3C%3C1|(i%3C0%26%268),e[t++]=r%26%268,e[t++]=255%26n.compression,e[t++]=n.compression%3E%3E8;var%20d=new%20Date(null==n.mtime%3FDate.now():n.mtime),h=d.getFullYear()-1980;if((h%3C0||h%3E119)%26%26v(10),y(e,t,h%3C%3C25|d.getMonth()+1%3C%3C21|d.getDate()%3C%3C16|d.getHours()%3C%3C11|d.getMinutes()%3C%3C5|d.getSeconds()%3E%3E1),t+=4,-1!=i%26%26(y(e,t,n.crc),y(e,t+4,i%3C0%3F-i-2:i),y(e,t+8,n.size)),y(e,t+12,c),y(e,t+14,f),t+=16,null!=a%26%26(y(e,t,u),y(e,t+6,n.attrs),y(e,t+10,a),t+=14),e.set(o,t),t+=c,f)for(var%20p%20in%20l){var%20m=l[p],g=m.length;y(e,t,+p),y(e,t+2,g),e.set(m,t+4),t+=4+g}return%20u%26%26(e.set(s,t),t+=u),t},P=function(){function%20e(e){var%20t;this.filename=e,this.c=(t=-1,{p:function(e){for(var%20n=t,o=0;o%3Ce.length;++o)n=w[255%26n^e[o]]^n%3E%3E%3E8;t=n},d:function(){return~t}}),this.size=0,this.compression=0}return%20e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){this.ondata||v(5),this.c.p(e),this.size+=e.length,t%26%26(this.crc=this.c.d()),this.process(e,t||!1)},e}(),S=function(){function%20e(e){this.ondata=e,this.u=[],this.d=1}return%20e.prototype.add=function(e){var%20n=this;if(this.ondata||v(5),2%26this.d)this.ondata(v(4+8*(1%26this.d),0,1),null,!1);else{var%20o=E(e.filename),r=o.length,i=e.comment,a=i%26%26E(i),s=r!=e.filename.length||a%26%26i.length!=a.length,c=r+x(e.extra)+30;r%3E65535%26%26this.ondata(v(11,0,1),null,!1);var%20l=new%20t(c);T(l,0,e,o,s,-1);var%20u=[l],f=function(){for(var%20e=0,t=u;e%3Ct.length;e++){var%20o=t[e];n.ondata(null,o,!1)}u=[]},d=this.d;this.d=0;var%20h=this.u.length,p=function(e,t){var%20n={};for(var%20o%20in%20e)n[o]=e[o];for(var%20o%20in%20t)n[o]=t[o];return%20n}(e,{f:o,u:s,o:a,t:function(){e.terminate%26%26e.terminate()},r:function(){if(f(),d){var%20e=n.u[h+1];e%3Fe.r():n.d=1}d=1}}),m=0;e.ondata=function(o,r,i){if(o)n.ondata(o,r,i),n.terminate();else%20if(m+=r.length,u.push(r),i){var%20a=new%20t(16);y(a,0,134695760),y(a,4,e.crc),y(a,8,m),y(a,12,e.size),u.push(a),p.c=m,p.b=c+m+16,p.crc=e.crc,p.size=e.size,d%26%26p.r(),d=1}else%20d%26%26f()},this.u.push(p)}},e.prototype.end=function(){var%20e=this;2%26this.d%3Fthis.ondata(v(4+8*(1%26this.d),0,1),null,!0):(this.d%3Fthis.e():this.u.push({r:function(){1%26e.d%26%26(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3)},e.prototype.e=function(){for(var%20e=0,n=0,o=0,r=0,i=this.u;r%3Ci.length;r++){o+=46+(p=i[r]).f.length+x(p.extra)+(p.o%3Fp.o.length:0)}for(var%20a,s,c,l,u,f=new%20t(o+22),d=0,h=this.u;d%3Ch.length;d++){var%20p=h[d];T(f,e,p,p.f,p.u,-p.c-2,n,p.o),e+=46+p.f.length+x(p.extra)+(p.o%3Fp.o.length:0),n+=p.b}a=f,s=e,c=this.u.length,l=o,u=n,y(a,s,101010256),y(a,s+8,c),y(a,s+10,c),y(a,s+12,l),y(a,s+16,u),this.ondata(null,f,!0),this.d=2},e.prototype.terminate=function(){for(var%20e=0,t=this.u;e%3Ct.length;e++){t[e].t()}this.d=2},e}(),z=%22undefined%22!=typeof%20globalThis%3FglobalThis:%22undefined%22!=typeof%20window%3Fwindow:%22undefined%22!=typeof%20global%3Fglobal:%22undefined%22!=typeof%20self%3Fself:{},F={exports:{}};k=F,function(){function%20e(e,t){return%20void%200===t%3Ft={autoBom:!1}:%22object%22!=typeof%20t%26%26(console.warn(%22Deprecated:%20Expected%20third%20argument%20to%20be%20a%20object%22),t={autoBom:!t}),t.autoBom%26%26/^\s*(%3F:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)%3Fnew%20Blob([%22\ufeff%22,e],{type:e.type}):e}function%20t(e,t,n){var%20o=new%20XMLHttpRequest;o.open(%22GET%22,e),o.responseType=%22blob%22,o.onload=function(){a(o.response,t,n)},o.onerror=function(){console.error(%22could%20not%20download%20file%22)},o.send()}function%20n(e){var%20t=new%20XMLHttpRequest;t.open(%22HEAD%22,e,!1);try{t.send()}catch(e){}return%20200%3C=t.status%26%26299%3E=t.status}function%20o(e){try{e.dispatchEvent(new%20MouseEvent(%22click%22))}catch(n){var%20t=document.createEvent(%22MouseEvents%22);t.initMouseEvent(%22click%22,!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var%20r=%22object%22==typeof%20window%26%26window.window===window%3Fwindow:%22object%22==typeof%20self%26%26self.self===self%3Fself:%22object%22==typeof%20z%26%26z.global===z%3Fz:void%200,i=r.navigator%26%26/Macintosh/.test(navigator.userAgent)%26%26/AppleWebKit/.test(navigator.userAgent)%26%26!/Safari/.test(navigator.userAgent),a=r.saveAs||(%22object%22!=typeof%20window||window!==r%3Ffunction(){}:%22download%22in%20HTMLAnchorElement.prototype%26%26!i%3Ffunction(e,i,a){var%20s=r.URL||r.webkitURL,c=document.createElement(%22a%22);i=i||e.name||%22download%22,c.download=i,c.rel=%22noopener%22,%22string%22==typeof%20e%3F(c.href=e,c.origin===location.origin%3Fo(c):n(c.href)%3Ft(e,i,a):o(c,c.target=%22_blank%22)):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:%22msSaveOrOpenBlob%22in%20navigator%3Ffunction(r,i,a){if(i=i||r.name||%22download%22,%22string%22!=typeof%20r)navigator.msSaveOrOpenBlob(e(r,a),i);else%20if(n(r))t(r,i,a);else{var%20s=document.createElement(%22a%22);s.href=r,s.target=%22_blank%22,setTimeout((function(){o(s)}))}}:function(e,n,o,a){if((a=a||open(%22%22,%22_blank%22))%26%26(a.document.title=a.document.body.innerText=%22downloading...%22),%22string%22==typeof%20e)return%20t(e,n,o);var%20s=%22application/octet-stream%22===e.type,c=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s%26%26c||i)%26%26%22undefined%22!=typeof%20FileReader){var%20u=new%20FileReader;u.onloadend=function(){var%20e=u.result;e=l%3Fe:e.replace(/^data:[^;]*;/,%22data:attachment/file;%22),a%3Fa.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var%20f=r.URL||r.webkitURL,d=f.createObjectURL(e);a%3Fa.location=d:location.href=d,a=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});r.saveAs=a.saveAs=a,k.exports=a}();var%20j,D=F.exports;function%20R(e,t,n){return(t=function(e){var%20t=function(e,t){if(%22object%22!=typeof%20e||null===e)return%20e;var%20n=e[Symbol.toPrimitive];if(void%200!==n){var%20o=n.call(e,t||%22default%22);if(%22object%22!=typeof%20o)return%20o;throw%20new%20TypeError(%22%40%40toPrimitive%20must%20return%20a%20primitive%20value.%22)}return(%22string%22===t%3FString:Number)(e)}(e,%22string%22);return%22symbol%22==typeof%20t%3Ft:String(t)}(t))in%20e%3FObject.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class%20L{constructor(e=0){R(this,%22addToDocument%22,(()=%3Edocument.body.appendChild(this.element))),R(this,%22removeFromDocument%22,(()=%3Ethis.element.remove()));const%20t=document.createElement(%22div%22);t.style.setProperty(%22z-index%22,%221000%22),t.style.setProperty(%22position%22,%22fixed%22),t.style.setProperty(%22bottom%22,%220%22),t.style.setProperty(%22left%22,%220%22),t.style.setProperty(%22width%22,%22100%25%22),t.style.setProperty(%22height%22,%2224px%22),t.style.setProperty(%22background-color%22,%22%233c3c3c%22),t.style.setProperty(%22cursor%22,%22pointer%22);const%20n=document.createElement(%22div%22);n.style.setProperty(%22height%22,%22100%25%22),n.style.setProperty(%22background-color%22,%22%23b5e853%22),n.style.setProperty(%22transition%22,%22width%20200ms%22),this.bar=n,this.update(e),t.appendChild(n),t.addEventListener(%22click%22,this.removeFromDocument),this.element=t}update(e){const%20t=Math.ceil(parseInt(this.bar.style.getPropertyValue(%22width%22))),n=Math.ceil(e);n%3E=100%3Fthis.removeFromDocument():t!==n%26%26n%3E=0%26%26this.bar.style.setProperty(%22width%22,`${n}%25`)}}j=()=%3E{const%20t=document.querySelectorAll(%22.itemImageLink%22),n=t=%3Ee(t,/(%3F:[/dp]|$)([A-Z0-9]{10})/,1),o=e=%3E`https://${window.location.hostname}/images/P/${e}.01.MAIN._SCRM_.jpg`,r=t=%3E{const%20n=e=%3Enew%20Promise(((t,n)=%3Efetch(e).then((e=%3Ee.blob())).then((e=%3E{if(e.size%3C50)throw%20new%20Error(%22cover%20is%20smaller%20than%2050%20bytes%22);t(e)})).catch((e=%3En(%22Failed%20to%20fetch%20cover!\n%22+e)))));return%20new%20Promise(((o,r)=%3E{n(t).then(o).catch((t=%3E{const%20i=document.querySelector(%22img%23igImage%22)||document.querySelector(%22img%23imgBlkFront%22)||document.querySelector(%22img%23ebooksImgBlkFront%22);if(i){const%20t=/(https%3F:\/\/.*\/images\/[A-Z]\/[A-Za-z0-9+-]+).*(\.[a-z]+)/,a=e(i.src,t,1),s=e(i.src,t,2);if(a%26%26s)return%20n(a+s).then(o).catch(r)}r(t)}))}))};let%20i=0;const%20a=e=%3E{console.error(e),1==++i%26%26alert(e)};if(t.length%3E0){const%20e=Array.from(t).map((e=%3En(e.href)));return%20t.length%3E4%26%26confirm(%22Since%20you're%20downloading%20more%20than%204%20covers,%20would%20you%20like%20to%20zip%20them%3F%22)%3Ffunction(e){const%20t=new%20L;t.addToDocument();let%20n=0;const%20i=[],s=new%20S(((o,r,s)=%3E{t.update(n/e.length*100),o%3F(a(%22Failed%20to%20zip%20covers!\n%22+o),t.removeFromDocument()):i.push(r),s%26%26(D.saveAs(new%20Blob(i,{type:%22application/zip%22}),%22covers.zip%22),t.removeFromDocument())}));function%20c(e,n){return%20new%20Promise((o=%3E{const%20i=new%20FileReader;i.onload=e=%3E{if(!e.target)return;const%20t=new%20Uint8Array(e.target.result),r=new%20P(`${n}.jpg`);s.add(r),r.push(t,!0),o()},r(e).then((e=%3E{try{i.readAsArrayBuffer(e)}catch(e){throw%20new%20Error(%22Failed%20to%20zip%20cover!\n%22+e)}})).catch((e=%3E{a(e),t.removeFromDocument()}))}))}e.forEach((async%20t=%3E{if(t){const%20e=o(t);await%20c(e,t)}++n%3E=e.length%26%26s.end()}))}(e):void%20c(e)}const%20s=n(window.location.href);if(!s)return%20alert(%22No%20covers%20found%20on%20this%20page!%22);function%20c(e){e.forEach((e=%3E{e%26%26r(o(e)).then((t=%3ED.saveAs(t,`${e}.jpg`))).catch(a)}))}c([s])},function(e,t){if(!new%20RegExp(e).test(window.location.hostname))return%20alert(%22Bookmarklet%20executed%20on%20a%20wrong%20website!%22);t()}(%22www.amazon.*%22,j);})();
